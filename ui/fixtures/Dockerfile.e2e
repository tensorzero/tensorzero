FROM mcr.microsoft.com/playwright:v1.50.0-noble

# Use the official Playwright image; just install pnpm and run tests.
RUN npm install -g pnpm

WORKDIR /app

# Copy repository contents (simple and reliable for e2e tests)
COPY . .

# Install workspace dependencies
RUN pnpm install --frozen-lockfile

# Default command: run UI e2e tests
ENTRYPOINT ["pnpm", "ui:test:e2e"]
