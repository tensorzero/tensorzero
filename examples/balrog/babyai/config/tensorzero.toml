# ┌────────────────────────────────────────────────────────────────────────────┐
# │                                   MODELS                                   │
# └────────────────────────────────────────────────────────────────────────────┘

[models.my_gpt_4o_mini]
routing = ["openai"]

[models."my_gpt_4o_mini".providers.openai]
type = "openai"
model_name = "gpt-4o-mini-2024-07-18"

# ┌────────────────────────────────────────────────────────────────────────────┐
# │                                 FUNCTIONS                                  │
# └────────────────────────────────────────────────────────────────────────────┘

[functions.generate_action]
type = "chat"
system_schema = "functions/generate_action/system_schema.json"
user_schema = "functions/generate_action/user_schema.json"

[functions.generate_action.variants.baseline]
type = "chat_completion"
weight = 1.0
model = "my_gpt_4o_mini"
system_template = "functions/generate_action/baseline/system.minijinja"
user_template = "functions/generate_action/baseline/user.minijinja"

[functions.generate_action.variants.no_mission]
type = "chat_completion"
weight = 1.0
model = "my_gpt_4o_mini"
system_template = "functions/generate_action/no_mission/system.minijinja"
user_template = "functions/generate_action/no_mission/user.minijinja"

[functions.generate_action.variants.history]
type = "chat_completion"
weight = 1.0
model = "my_gpt_4o_mini"
system_template = "functions/generate_action/history/system.minijinja"
user_template = "functions/generate_action/history/user.minijinja"

[functions.generate_action.variants.reasoning]
type = "chat_completion"
weight = 1.0
model = "my_gpt_4o_mini"
system_template = "functions/generate_action/reasoning/system.minijinja"
user_template = "functions/generate_action/reasoning/user.minijinja"

[functions.generate_action.variants.history_and_reasoning]
type = "chat_completion"
weight = 1.0
model = "my_gpt_4o_mini"
system_template = "functions/generate_action/history_and_reasoning/system.minijinja"
user_template = "functions/generate_action/history_and_reasoning/user.minijinja"

[functions.generate_action.variants.best_of_5]
weight = 1
type = "experimental_best_of_n_sampling"
candidates = [
    "baseline",
    "no_mission",
    "history",
    "reasoning",
    "history_and_reasoning",
]

[functions.generate_action.variants.best_of_5.evaluator]
model = "my_gpt_4o_mini"
system_template = "functions/generate_action/baseline/system.minijinja"
user_template = "functions/generate_action/history_and_reasoning/user.minijinja"

[functions.extract_action]
type = "json"
output_schema = "functions/extract_action/output_schema.json"

[functions.extract_action.variants.simple_variant]
type = "chat_completion"
weight = 1.0
model = "my_gpt_4o_mini"
system_template = "functions/extract_action/simple_variant/system.minijinja"

# ┌────────────────────────────────────────────────────────────────────────────┐
# │                                  METRICS                                   │
# └────────────────────────────────────────────────────────────────────────────┘

[metrics.reward]
level = "inference"
optimize = "max"
type = "float"

[metrics.episode_return]
level = "episode"
optimize = "max"
type = "float"

[metrics.progression]
level = "episode"
optimize = "max"
type = "float"

# ┌────────────────────────────────────────────────────────────────────────────┐
# │                                  TOOLS                                     │
# └────────────────────────────────────────────────────────────────────────────┘
