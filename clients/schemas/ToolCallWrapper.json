{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ToolCallWrapper",
  "description": "`ToolCallWrapper` helps us disambiguate between `ToolCall` (no `raw_*`) and `InferenceResponseToolCall` (has `raw_*`).",
  "anyOf": [
    {
      "$ref": "#/$defs/ToolCall"
    },
    {
      "$ref": "#/$defs/InferenceResponseToolCall"
    }
  ],
  "$defs": {
    "ToolCall": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "arguments": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "name",
        "arguments"
      ]
    },
    "InferenceResponseToolCall": {
      "description": "An InferenceResponseToolCall is a request by a model to call a Tool\nin the form that we return to the client / ClickHouse",
      "type": "object",
      "properties": {
        "id": {
          "description": "A Tool Call ID to match up with tool call responses. See #4058.",
          "type": "string"
        },
        "raw_name": {
          "description": "The name of the tool to call, as generated by the model.",
          "type": "string"
        },
        "raw_arguments": {
          "description": "The raw arguments JSON string of the tool to call, as generated by the model.",
          "type": "string"
        },
        "name": {
          "description": "The name of the tool to call, validated against tool configs. If not present, it means the tool call was invalid.",
          "type": [
            "string",
            "null"
          ]
        },
        "arguments": {
          "description": "The arguments of the tool to call, validated against tool configs. If not present, it means the tool call arguments were invalid."
        }
      },
      "required": [
        "id",
        "raw_name",
        "raw_arguments"
      ]
    }
  }
}